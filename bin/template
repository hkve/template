#!/usr/bin/env python
from template.main import read_config, copy
import argparse


options, templates = read_config()
template_keys = list(templates.keys())

parser = argparse.ArgumentParser(description="description")

parser.add_argument("temp", metavar="template alias", type=str, help="Your own created name for the template you wish to use", choices=template_keys)
parser.add_argument("-f", "--file", help="Name or path of new file to be created", required=False)

args = vars(parser.parse_args())

template = templates[args["temp"]]
filename = args["file"]

if filename is None: filename = template

copy(filename, template)

if options["open_editor"]:
	import subprocess
	cmd = f'{options["editor"]} {filename}'.split()
	subprocess.run(cmd)
